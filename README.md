# Livephoto Downloader

Photoplus 高清原图下载同步工具。运行后自动启动本地服务，提供油猴脚本一键安装，支持多线程下载与按活动/相册自动归档。

## 特性

- 零配置启动：自动创建下载目录和配置文件
- 多线程下载：多线程下载支持
- 智能归档：下载到 Downloads/活动名称/相册名称/文件名
- 去重下载：自动跳过已存在文件
- 精简面板：捕获数量、自动翻页、同步按钮、实时进度

## 环境要求

- Windows / macOS / Linux
- Python 3.9+（建议 3.10+）
- 浏览器安装 Tampermonkey / 暴力猴 扩展

## 安装依赖

```bash
pip install -r requirements.txt
```

## 快速开始（开箱即用）

1. 启动服务

```bash
python downloader.py
```

首次运行会自动生成 config.conf，并创建下载目录。

2. 打开本地服务页面

在浏览器访问：

```
http://127.0.0.1:5000
```

点击“安装 / 更新油猴脚本”。

3. 打开 Photoplus 网页

访问：

```
https://live.photoplus.cn/live/pc/
```

页面右侧会出现悬浮面板，滚动页面或切换相册即可捕获原图。

4. 一键同步

点击“**一键同步至本地**”，下载任务会发送给本地服务并开始下载。

## 配置说明（config.conf）

首次运行自动生成，可手动修改：

```ini
[server]
host = 127.0.0.1
port = 5000

[download]
root = Downloads
threads = 8
timeout = 30
```

- host/port：本地服务监听地址
- root：下载目录（相对路径，默认在项目目录下）
- threads：线程数
- timeout：单个下载超时时间（秒）

修改后重启服务生效。

## 下载目录结构

```
Downloads/
	活动名称/
		相册名称/
			文件名.jpg
```

## 常见问题

### 1) 脚本提示“后端未连接”

- 确认 downloader.py 正在运行
- 确认浏览器能访问 http://127.0.0.1:5000
- Tampermonkey 已启用脚本

### 2) 下载到 17 字节空文件

脚本已保留完整签名 URL。若仍出现，请确保不要改动 URL 参数，或检查网络环境。

### 3) 下载速度慢

- 增加 config.conf 中的 threads 数量
- 尝试关闭代理或更换网络环境

## 进阶使用

- 自动翻页：面板中开启“自动翻页”，系统会自动滚动至页面底部
- 拖动面板：按住面板标题栏可拖动位置

## 声明

本工具仅用于下载用户有权限访问的内容，请遵守相关平台的服务条款。

## 注意

本项目使用 Copilot 编写。主要用作AI能力测试。
